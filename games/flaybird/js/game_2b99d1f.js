function Game(i,t,h,s,e,r,a,d,p){this.ctx=i,this.bg_day=t,this.land=h,this.title=s,this.tutorial=e,this.bird=r,this.pipe=[a],this.gameover=d,this.i=0,this.iframe=0,this.scores=p,this.scores_id=10}Game.prototype={constructor:Game,init:function(){this.bird.init(),this.pipe=[this.pipe[0]],this.pipe[0].init()},reset:function(){this.init(),this.welcome()},renderBg:function(){this.ctx.drawImage(this.bg_day.img,-this.i%this.bg_day.img.width*this.bg_day.speed,0),this.ctx.drawImage(this.bg_day.img,this.bg_day.img.width-this.i%this.bg_day.img.width*this.bg_day.speed,0),this.ctx.drawImage(this.bg_day.img,2*this.bg_day.img.width-this.i%this.bg_day.img.width*this.bg_day.speed,0)},renderLand:function(){var i=-(this.i%this.land.img.width)*this.land.speed;i<=-this.land.img.width&&(i+=this.land.img.width),this.ctx.drawImage(this.land.img,i,400),this.ctx.drawImage(this.land.img,i+this.land.img.width,400),this.ctx.drawImage(this.land.img,i+2*this.land.img.width,400)},renderTitle:function(){this.ctx.drawImage(this.title,(this.ctx.canvas.width-this.title.width)/2,this.i>220?220:this.i)},renderTutorial:function(){this.ctx.drawImage(this.tutorial,(this.ctx.canvas.width-this.tutorial.width)/2,300)},renderBird:function(){var i=this.i%(10*this.bird.imgArr.length);i=9>=i?0:19>=i?1:2,this.ctx.save(),this.ctx.translate(this.bird.positionX+24,this.bird.positionY+24),this.ctx.rotate("D"===this.bird.state?Math.PI/180*this.bird.i:-Math.PI/180*this.bird.i),this.ctx.drawImage(this.bird.imgArr[i],-24,-24),this.ctx.restore()},renderScores:function(){console.log(this.scores_id);var i=this.scores_id.toString();console.log(i);var t=i.split("");console.log(t);for(var h=0;h<t.length;h++)this.ctx.drawImage(this.scores[t[h]],20+24*h,450)},renderPipe:function(){for(var i=0;i<this.pipe.length;i++)this.ctx.drawImage(this.pipe[i].imgArr[1],0,320-this.pipe[i].up_height,this.pipe[i].imgArr[1].width,this.pipe[i].up_height,this.ctx.canvas.width-this.pipe[i].x,0,this.pipe[i].imgArr[1].width,this.pipe[i].up_height),this.ctx.drawImage(this.pipe[i].imgArr[0],0,0,this.pipe[i].imgArr[0].width,this.pipe[i].dowm_height,this.ctx.canvas.width-this.pipe[i].x,this.pipe[i].up_height+150,this.pipe[i].imgArr[0].width,this.pipe[i].dowm_height),this.pipe[i].hasMedals&&this.ctx.drawImage(this.pipe[i].medals,this.ctx.canvas.width-this.pipe[i].x+(this.pipe[i].imgArr[0].width-this.pipe[i].medals.width)/2,(150-this.pipe[i].medals.height)/2+this.pipe[i].up_height)},count:function(){this.iframe++,this.iframe%202<1&&this.createPipe()},createPipe:function(){this.pipe.push(this.pipe[0].clone())},checkPipe:function(){this.pipe[0].x>=this.ctx.canvas.width+this.pipe[0].imgArr[0].width&&this.pipe.shift()},checkBird:function(){for(var i=0;i<this.pipe.length;i++){{var t=({x:this.ctx.canvas.width-this.pipe[i].x,y:0},{x:this.ctx.canvas.width-this.pipe[i].x+this.pipe[i].imgArr[0].width,y:0},{x:this.ctx.canvas.width-this.pipe[i].x,y:this.pipe[i].up_height}),h={x:this.ctx.canvas.width-this.pipe[i].x+this.pipe[i].imgArr[0].width,y:this.pipe[i].up_height},s={x:this.ctx.canvas.width-this.pipe[i].x,y:this.pipe[i].up_height+150},e={x:this.ctx.canvas.width-this.pipe[i].x+this.pipe[i].imgArr[0].width,y:this.pipe[i].up_height+150};({x:this.ctx.canvas.width-this.pipe[i].x,y:400}),{x:this.ctx.canvas.width-this.pipe[i].x+this.pipe[i].imgArr[0].width,y:400}}if(this.bird.B.x>=t.x&&this.bird.A.x<=h.x&&this.bird.A.y<=t.y)alert("死于上边的管子"),this.stop(),this.renderGameOver(),this.renderTutorial();else if(this.bird.B.x>=s.x&&this.bird.A.x<=e.x&&this.bird.C.y>=s.y){alert("死于下边的管子"),this.stop(),this.renderGameOver(),this.renderTutorial();var r=this;this.ctx.canvas.onclick=function(i){i.offsetX>=122&&i.offsetX<=236&&i.offsetY>=282&&i.offsetY<=380&&r.reset()}}this.bird.C.y>=400&&this.stop();var a={x:this.ctx.canvas.width-this.pipe[i].x+(this.pipe[i].imgArr[0].width-this.pipe[i].medals.width)/2,y:(150-this.pipe[i].medals.height)/2+this.pipe[i].up_height},d={x:this.ctx.canvas.width-this.pipe[i].x+(this.pipe[i].imgArr[0].width-this.pipe[i].medals.width)/2,y:(150-this.pipe[i].medals.height)/2+this.pipe[i].up_height+this.pipe[i].medals.height};(this.bird.B.x>a.x&&this.bird.D.y>=a.y||this.bird.B.x>a.x&&this.bird.B.y>=d.y)&&this.pipe[i].hasMedals&&(this.pipe[i].medalsBeEat(),this.scores_id++,this.renderScores())}},renderGameOver:function(){this.ctx.drawImage(this.gameover,(this.ctx.canvas.width-this.gameover.width)/2,250)},start:function(){var i=this;clearInterval(this.timer),this.timer=setInterval(function(){i.clear(),i.go(),i.count(),i.renderBg(),i.renderLand(),i.renderPipe(),i.renderBird(),i.bird.swing();for(var t=0;t<i.pipe.length;t++)i.pipe[t].changeX();i.checkPipe(),i.checkBird(),i.renderScores()},20)},stop:function(){clearInterval(this.timer)},click:function(){var i=this;this.ctx.canvas.onclick=function(t){t.offsetX>(i.ctx.canvas.width-i.tutorial.width)/2&&t.offsetX<(i.ctx.canvas.width-i.tutorial.width)/2+i.tutorial.width&&t.offsetY>300&&t.offsetY<300+i.tutorial.height&&(i.start(),i.off(),this.onclick=function(){i.bird.energy()})}},off:function(){this.ctx.canvas.onclick=null},welcome:function(){var i=this;this.timer=setInterval(function(){i.clear(),i.renderBg(),i.renderLand(),i.go(),i.renderTitle(),i.i>=200&&i.i%20<=10&&(i.renderTutorial(),i.click())},20)},go:function(){this.i++},clear:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}};