!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Reflux=t()}}(function(){var define,module,exports;return function t(e,n,i){function r(s,c){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e){"use strict";function n(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(){}var r="function"!=typeof Object.create?"~":!1;i.prototype._events=void 0,i.prototype.listeners=function(t,e){var n=r?r+t:t,i=this._events&&this._events[n];if(e)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,s=i.length,c=new Array(s);s>o;o++)c[o]=i[o].fn;return c},i.prototype.emit=function(t,e,n,i,o,s){var c=r?r+t:t;if(!this._events||!this._events[c])return!1;var a,l,u=this._events[c],f=arguments.length;if("function"==typeof u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),f){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,i),!0;case 5:return u.fn.call(u.context,e,n,i,o),!0;case 6:return u.fn.call(u.context,e,n,i,o,s),!0}for(l=1,a=new Array(f-1);f>l;l++)a[l-1]=arguments[l];u.fn.apply(u.context,a)}else{var h,p=u.length;for(l=0;p>l;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),f){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,n);break;default:if(!a)for(h=1,a=new Array(f-1);f>h;h++)a[h-1]=arguments[h];u[l].fn.apply(u[l].context,a)}}return!0},i.prototype.on=function(t,e,i){var o=new n(e,i||this),s=r?r+t:t;return this._events||(this._events=r?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],o]:this._events[s].push(o):this._events[s]=o,this},i.prototype.once=function(t,e,i){var o=new n(e,i||this,!0),s=r?r+t:t;return this._events||(this._events=r?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],o]:this._events[s].push(o):this._events[s]=o,this},i.prototype.removeListener=function(t,e,n,i){var o=r?r+t:t;if(!this._events||!this._events[o])return this;var s=this._events[o],c=[];if(e)if(s.fn)(s.fn!==e||i&&!s.once||n&&s.context!==n)&&c.push(s);else for(var a=0,l=s.length;l>a;a++)(s[a].fn!==e||i&&!s[a].once||n&&s[a].context!==n)&&c.push(s[a]);return c.length?this._events[o]=1===c.length?c[0]:c:delete this._events[o],this},i.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[r?r+t:t]:this._events=r?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=r,"undefined"!=typeof e&&(e.exports=i)},{}],2:[function(t,e){"use strict";e.exports={}},{}],3:[function(t,e,n){"use strict";n.createdStores=[],n.createdActions=[],n.reset=function(){for(;n.createdStores.length;)n.createdStores.pop();for(;n.createdActions.length;)n.createdActions.pop()}},{}],4:[function(t,e){"use strict";var n=t("./utils"),i=t("./joins").instanceJoinCreator,r=function(t){for(var e,n=0,i={};n<(t.children||[]).length;++n)e=t.children[n],t[e]&&(i[e]=t[e]);return i},o=function s(t){var e={};for(var i in t){var o=t[i],c=r(o),a=s(c);e[i]=o;for(var l in a){var u=a[l];e[i+n.capitalize(l)]=u}}return e};e.exports={hasListener:function(t){for(var e,n,i,r=0;r<(this.subscriptions||[]).length;++r)for(i=[].concat(this.subscriptions[r].listenable),e=0;e<i.length;e++)if(n=i[e],n===t||n.hasListener&&n.hasListener(t))return!0;return!1},listenToMany:function(t){var e=o(t);for(var i in e){var r=n.callbackName(i),s=this[r]?r:this[i]?i:void 0;s&&this.listenTo(e[i],s,this[r+"Default"]||this[s+"Default"]||s)}},validateListening:function(t){return t===this?"Listener is not able to listen to itself":n.isFunction(t.listen)?t.hasListener&&t.hasListener(this)?"Listener cannot listen to this listenable because of circular loop":void 0:t+" is missing a listen method"},listenTo:function(t,e,i){var r,o,s,c=this.subscriptions=this.subscriptions||[];return n.throwIf(this.validateListening(t)),this.fetchInitialState(t,i),r=t.listen(this[e]||e,this),o=function(){var t=c.indexOf(s);n.throwIf(-1===t,"Tried to remove listen already gone from subscriptions list!"),c.splice(t,1),r()},s={stop:o,listenable:t},c.push(s),s},stopListeningTo:function(t){for(var e,i=0,r=this.subscriptions||[];i<r.length;i++)if(e=r[i],e.listenable===t)return e.stop(),n.throwIf(-1!==r.indexOf(e),"Failed to remove listen from subscriptions list!"),!0;return!1},stopListeningToAll:function(){for(var t,e=this.subscriptions||[];t=e.length;)e[0].stop(),n.throwIf(e.length!==t-1,"Failed to remove listen from subscriptions list!")},fetchInitialState:function(t,e){e=e&&this[e]||e;var i=this;if(n.isFunction(e)&&n.isFunction(t.getInitialState)){var r=t.getInitialState();r&&n.isFunction(r.then)?r.then(function(){e.apply(i,arguments)}):e.call(this,r)}},joinTrailing:i("last"),joinLeading:i("first"),joinConcat:i("all"),joinStrict:i("strict")}},{"./joins":11,"./utils":13}],5:[function(t,e){"use strict";var n=t("./utils");e.exports={preEmit:function(){},shouldEmit:function(){return!0},listen:function(t,e){e=e||this;var n=function(n){r||t.apply(e,n)},i=this,r=!1;return this.emitter.addListener(this.eventLabel,n),function(){r=!0,i.emitter.removeListener(i.eventLabel,n)}},promise:function(t){var e=this,n=this.children.indexOf("completed")>=0&&this.children.indexOf("failed")>=0;if(!n)throw new Error('Publisher must have "completed" and "failed" child publishers');t.then(function(t){return e.completed(t)},function(t){return e.failed(t)})},listenAndPromise:function(t,e){var n=this;e=e||this,this.willCallPromise=(this.willCallPromise||0)+1;var i=this.listen(function(){if(!t)throw new Error("Expected a function returning a promise but got "+t);var i=arguments,r=t.apply(e,i);return n.promise.call(n,r)},e);return function(){n.willCallPromise--,i.call(n)}},trigger:function(){var t=arguments,e=this.preEmit.apply(this,t);t=void 0===e?t:n.isArguments(e)?e:[].concat(e),this.shouldEmit.apply(this,t)&&this.emitter.emit(this.eventLabel,t)},triggerAsync:function(){var t=arguments,e=this;n.nextTick(function(){e.trigger.apply(e,t)})},triggerPromise:function(){var t=this,e=arguments,i=this.children.indexOf("completed")>=0&&this.children.indexOf("failed")>=0,r=n.createPromise(function(r,o){if(t.willCallPromise)return void n.nextTick(function(){var n=t.promise;t.promise=function(e){return e.then(r,o),t.promise=n,t.promise.apply(t,arguments)},t.trigger.apply(t,e)});if(i)var s=t.completed.listen(function(t){s(),c(),r(t)}),c=t.failed.listen(function(t){s(),c(),o(t)});t.triggerAsync.apply(t,e),i||r()});return r}}},{"./utils":13}],6:[function(t,e){"use strict";e.exports={}},{}],7:[function(t,e){"use strict";e.exports=function(t,e){for(var n in e)if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var i=Object.getOwnPropertyDescriptor(e,n);if(!i.value||"function"!=typeof i.value||!e.hasOwnProperty(n))continue;t[n]=e[n].bind(t)}else{var r=e[n];if("function"!=typeof r||!e.hasOwnProperty(n))continue;t[n]=r.bind(t)}return t}},{}],8:[function(t,e){"use strict";var n=t("./utils"),i=t("./ActionMethods"),r=t("./PublisherMethods"),o=t("./Keep"),s={preEmit:1,shouldEmit:1},c=function a(t){t=t||{},n.isObject(t)||(t={actionName:t});for(var e in i)if(!s[e]&&r[e])throw new Error("Cannot override API method "+e+" in Reflux.ActionMethods. Use another method name or override it on Reflux.PublisherMethods instead.");for(var c in t)if(!s[c]&&r[c])throw new Error("Cannot override API method "+c+" in action creation. Use another method name or override it on Reflux.PublisherMethods instead.");t.children=t.children||[],t.asyncResult&&(t.children=t.children.concat(["completed","failed"]));for(var l=0,u={};l<t.children.length;l++){var f=t.children[l];u[f]=a(f)}var h=n.extend({eventLabel:"action",emitter:new n.EventEmitter,_isAction:!0},r,i,t),p=function d(){var t=d.sync?"trigger":n.environment.hasPromise?"triggerPromise":"triggerAsync";return d[t].apply(d,arguments)};return n.extend(p,u,h),o.createdActions.push(p),p};e.exports=c},{"./ActionMethods":2,"./Keep":3,"./PublisherMethods":5,"./utils":13}],9:[function(t,e){"use strict";var n=t("./utils"),i=t("./Keep"),r=t("./mixer"),o=t("./bindMethods"),s={preEmit:1,shouldEmit:1};e.exports=function(e){function c(){var t,i=0;if(this.subscriptions=[],this.emitter=new n.EventEmitter,this.eventLabel="change",o(this,e),this.init&&n.isFunction(this.init)&&this.init(),this.listenables)for(t=[].concat(this.listenables);i<t.length;i++)this.listenToMany(t[i])}var a=t("./StoreMethods"),l=t("./PublisherMethods"),u=t("./ListenerMethods");e=e||{};for(var f in a)if(!s[f]&&(l[f]||u[f]))throw new Error("Cannot override API method "+f+" in Reflux.StoreMethods. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.");for(var h in e)if(!s[h]&&(l[h]||u[h]))throw new Error("Cannot override API method "+h+" in store creation. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.");e=r(e),n.extend(c.prototype,u,l,a,e);var p=new c;return i.createdStores.push(p),p}},{"./Keep":3,"./ListenerMethods":4,"./PublisherMethods":5,"./StoreMethods":6,"./bindMethods":7,"./mixer":12,"./utils":13}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={version:{"reflux-core":"0.2.1"}};i.ActionMethods=t("./ActionMethods"),i.ListenerMethods=t("./ListenerMethods"),i.PublisherMethods=t("./PublisherMethods"),i.StoreMethods=t("./StoreMethods"),i.createAction=t("./createAction"),i.createStore=t("./createStore");var r=t("./joins").staticJoinCreator;i.joinTrailing=i.all=r("last"),i.joinLeading=r("first"),i.joinStrict=r("strict"),i.joinConcat=r("all");var o=i.utils=t("./utils");i.EventEmitter=o.EventEmitter,i.Promise=o.Promise,i.createActions=function(){var t=function(t,e){Object.keys(t).forEach(function(n){var r=t[n];e[n]=i.createAction(r)})};return function(e){var n={};return e instanceof Array?e.forEach(function(e){o.isObject(e)?t(e,n):n[e]=i.createAction(e)}):t(e,n),n}}(),i.setEventEmitter=function(t){i.EventEmitter=o.EventEmitter=t},i.setPromise=function(t){i.Promise=o.Promise=t},i.setPromiseFactory=function(t){o.createPromise=t},i.nextTick=function(t){o.nextTick=t},i.use=function(t){t(i)},i.__keep=t("./Keep"),Function.prototype.bind||console.error("Function.prototype.bind not available. ES5 shim required. https://github.com/spoike/refluxjs#es5"),n["default"]=i,e.exports=n["default"]},{"./ActionMethods":2,"./Keep":3,"./ListenerMethods":4,"./PublisherMethods":5,"./StoreMethods":6,"./createAction":8,"./createStore":9,"./joins":11,"./utils":13}],11:[function(t,e,n){"use strict";function i(t,e,n){return function(){var i,r=n.subscriptions,o=r?r.indexOf(t):-1;for(a.throwIf(-1===o,"Tried to remove join already gone from subscriptions list!"),i=0;i<e.length;i++)e[i]();r.splice(o,1)}}function r(t){t.listenablesEmitted=new Array(t.numberOfListenables),t.args=new Array(t.numberOfListenables)}function o(t,e){return function(){var n=l.call(arguments);if(e.listenablesEmitted[t])switch(e.strategy){case"strict":throw new Error("Strict join failed because listener triggered twice.");case"last":e.args[t]=n;break;case"all":e.args[t].push(n)}else e.listenablesEmitted[t]=!0,e.args[t]="all"===e.strategy?[n]:n;s(e)}}function s(t){for(var e=0;e<t.numberOfListenables;e++)if(!t.listenablesEmitted[e])return;t.callback.apply(t.listener,t.args),r(t)}var c=t("./createStore"),a=t("./utils"),l=Array.prototype.slice,u={strict:"joinStrict",first:"joinLeading",last:"joinTrailing",all:"joinConcat"};n.staticJoinCreator=function(t){return function(){var e=l.call(arguments);return c({init:function(){this[u[t]].apply(this,e.concat("triggerAsync"))}})}},n.instanceJoinCreator=function(t){return function(){a.throwIf(arguments.length<2,"Cannot create a join with less than 2 listenables!");var e,n,s=l.call(arguments),c=s.pop(),u=s.length,f={numberOfListenables:u,callback:this[c]||c,listener:this,strategy:t},h=[];for(e=0;u>e;e++)a.throwIf(this.validateListening(s[e]));for(e=0;u>e;e++)h.push(s[e].listen(o(e,f),this));return r(f),n={listenable:s},n.stop=i(n,h,this),this.subscriptions=(this.subscriptions||[]).concat(n),n}}},{"./createStore":9,"./utils":13}],12:[function(t,e){"use strict";var n=t("./utils");e.exports=function(t){var e={init:[],preEmit:[],shouldEmit:[]},i=function r(t){var i={};return t.mixins&&t.mixins.forEach(function(t){n.extend(i,r(t))}),n.extend(i,t),Object.keys(e).forEach(function(n){t.hasOwnProperty(n)&&e[n].push(t[n])}),i}(t);return e.init.length>1&&(i.init=function(){var t=arguments;e.init.forEach(function(e){e.apply(this,t)},this)}),e.preEmit.length>1&&(i.preEmit=function(){return e.preEmit.reduce(function(t,e){var n=e.apply(this,t);return void 0===n?t:[n]}.bind(this),arguments)}),e.shouldEmit.length>1&&(i.shouldEmit=function(){var t=arguments;return!e.shouldEmit.some(function(e){return!e.apply(this,t)},this)}),Object.keys(e).forEach(function(t){1===e[t].length&&(i[t]=e[t][0])}),i}},{"./utils":13}],13:[function(require,module,exports){"use strict";function capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)}function callbackName(t,e){return e=e||"on",e+exports.capitalize(t)}function checkEnv(target){var flag=void 0;try{eval(target)&&(flag=!0)}catch(e){flag=!1}environment[callbackName(target,"has")]=flag}function isObject(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function extend(t){if(!isObject(t))return t;for(var e,n,i=1,r=arguments.length;r>i;i++){e=arguments[i];for(n in e)if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o)}else t[n]=e[n]}return t}function isFunction(t){return"function"==typeof t}function object(t,e){for(var n={},i=0;i<t.length;i++)n[t[i]]=e[i];return n}function isArguments(t){return"object"==typeof t&&"callee"in t&&"number"==typeof t.length}function throwIf(t,e){if(t)throw Error(e||t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.capitalize=capitalize,exports.callbackName=callbackName,exports.isObject=isObject,exports.extend=extend,exports.isFunction=isFunction,exports.object=object,exports.isArguments=isArguments,exports.throwIf=throwIf;var environment={};exports.environment=environment,checkEnv("setImmediate"),checkEnv("Promise"),exports.EventEmitter=require("eventemitter3"),exports.nextTick=environment.hasSetImmediate?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},environment.hasPromise?(exports.Promise=Promise,exports.createPromise=function(t){return new exports.Promise(t)}):(exports.Promise=null,exports.createPromise=function(){})},{eventemitter3:1}],14:[function(t,e){var n=t("reflux-core/lib/utils"),i=t("reflux-core/lib/ListenerMethods");e.exports=n.extend({componentWillUnmount:i.stopListeningToAll},i)},{"reflux-core/lib/ListenerMethods":4,"reflux-core/lib/utils":13}],15:[function(t,e){var n=t("reflux-core/lib/ListenerMethods"),i=t("./ListenerMixin"),r=t("reflux-core/lib/utils");e.exports=function(t,e){return{getInitialState:function(){return r.isFunction(t.getInitialState)?void 0===e?t.getInitialState():r.object([e],[t.getInitialState()]):{}},componentDidMount:function(){r.extend(this,n);var i=this,o=void 0===e?this.setState:function(t){("undefined"==typeof i.isMounted||i.isMounted()===!0)&&i.setState(r.object([e],[t]))};this.listenTo(t,o)},componentWillUnmount:i.componentWillUnmount}}},{"./ListenerMixin":14,"reflux-core/lib/ListenerMethods":4,"reflux-core/lib/utils":13}],16:[function(t,e){var n=t("reflux-core/lib/ListenerMethods"),i=t("./ListenerMixin"),r=t("reflux-core/lib/utils");e.exports=function(t,e,o){return o=r.isFunction(e)?e:o,{getInitialState:function(){if(r.isFunction(t.getInitialState)){if(r.isFunction(e))return o.call(this,t.getInitialState());var n=o.call(this,t.getInitialState());return"undefined"!=typeof n?r.object([e],[n]):{}}return{}},componentDidMount:function(){r.extend(this,n);var i=this,s=function(t){if(r.isFunction(e))i.setState(o.call(i,t));else{var n=o.call(i,t);i.setState(r.object([e],[n]))}};this.listenTo(t,s)},componentWillUnmount:i.componentWillUnmount}}},{"./ListenerMixin":14,"reflux-core/lib/ListenerMethods":4,"reflux-core/lib/utils":13}],17:[function(t,e){var n=t("reflux-core");n.connect=t("./connect"),n.connectFilter=t("./connectFilter"),n.ListenerMixin=t("./ListenerMixin"),n.listenTo=t("./listenTo"),n.listenToMany=t("./listenToMany"),e.exports=n},{"./ListenerMixin":14,"./connect":15,"./connectFilter":16,"./listenTo":18,"./listenToMany":19,"reflux-core":10}],18:[function(t,e){var n=t("reflux-core/lib/ListenerMethods");e.exports=function(t,e,i){return{componentDidMount:function(){for(var r in n)if(this[r]!==n[r]){if(this[r])throw"Can't have other property '"+r+"' when using Reflux.listenTo!";this[r]=n[r]}this.listenTo(t,e,i)},componentWillUnmount:n.stopListeningToAll}}},{"reflux-core/lib/ListenerMethods":4}],19:[function(t,e){var n=t("reflux-core/lib/ListenerMethods");e.exports=function(t){return{componentDidMount:function(){for(var e in n)if(this[e]!==n[e]){if(this[e])throw"Can't have other property '"+e+"' when using Reflux.listenToMany!";this[e]=n[e]}this.listenToMany(t)},componentWillUnmount:n.stopListeningToAll}}},{"reflux-core/lib/ListenerMethods":4}]},{},[17])(17)});